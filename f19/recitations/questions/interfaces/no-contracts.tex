\checkpoint*{\TAGS{interface}}

\enlargethispage{5ex}
Why couldn't this function be used in contracts in C0? Hint:
Contracts in C0 can't have side effects.

\answerline{}

\begin{solution}
C0 has checks in place to make sure that any functions that are called
from the assertion language (\lstinline'//@requires', \lstinline'//@ensures',
\lstinline'//@loop_invariant', or \lstinline'//@assert') are
are \emph{pure} --- that is, they don't manipulate memory. This
is to ensure that code running with contracts will always return the
same answer as code running without contracts. (It's possible to turn
off this check with the \lstinline'--no-purity-check' option.)

Because pushing and popping from the stack modifies allocated memory
(we haven't seen how, yet, but we know, even with our abstract picture
of stacks, that it must), the size function we wrote above isn't pure.
\end{solution}
