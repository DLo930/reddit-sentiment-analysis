\usepackage{xparse}    % Needed to deal with optional atom arguments
\usepackage{environ}   % A better command for defining environments, used
                       % to drop contents when needed.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% BEGIN: Diderot Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\NewDocumentEnvironment{diderotfig}{o}
{
\IfNoValueTF{#1}
{\paragraph*{Figure.}}
{\paragraph*{Figure [#1].}}
}
{

}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% BEGIN: AMSMath Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% \theoremstyle{definition}
% \newtheorem{theorem}{Theorem}[chapter]
% \newtheorem{corollary}[theorem]{Corollary}
% \newtheorem{lemma}[theorem]{Lemma}

% \newtheorem{definition}{Definition}[chapter]
% \newtheorem{algorithm}[definition]{Algorithm}
% \newtheorem{costspec}[definition]{Cost Specification}
% \newtheorem{datatype}[definition]{Data Type}
% \newtheorem{datastr}[definition]{Data Structure}
% \newtheorem{example}{Example}[chapter]
% \newtheorem{syntax}[definition]{Syntax}


% \theoremstyle{definition}
% \newtheorem{exercise}{Exercise}[chapter]
% \newtheorem{problem}[exercise]{Problem}
\newtheorem*{solution}{Solution}


% \theoremstyle{remark}
% \newtheorem*{assumption}{Assumption}
% \newtheorem*{hint}{Hint}
% \newtheorem*{important}{Important}
% \newtheorem*{note}{Note}
% \newtheorem*{remark}{Remark}
% \newtheorem*{reminder}{Reminder}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% END: AMSMath Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% BEGIN: Diderot Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\lstnewenvironment{code}[1][]
{\lstset{#1}}
{}


\NewDocumentEnvironment{flex}{o}
{
\IfNoValueTF{#1}
{\smallskip}
{
\hfill\break
\medskip
\noindent
{\large \textbf{#1.}}}
}

{
\IfNoValueTF{#1}
{\smallskip}
{\medskip}
}


\NewDocumentEnvironment{gram}{o}
{
\IfNoValueTF{#1}
{}
{\paragraph*{#1.}}
}
{
}


\NewDocumentEnvironment{preamble}{o}
{
\IfNoValueTF{#1}
%{\paragraph*{Preamble.}}
{}
{\paragraph*{#1.}}
}
{
}


\NewDocumentEnvironment{proposition}{o}
{
\IfNoValueTF{#1}
{\paragraph*{Proposition.}}
{\paragraph*{Proposition [#1].}}

}
{

}


\ifdefined\teachingnotes
\NewDocumentEnvironment{teachnote}{o}
{
%Drop \BODY
}
{
}
\else
\NewEnviron{teachnote}{}  % This drops body.
\fi
\ifdefined\teachingnotes
\NewDocumentEnvironment{teachask}{o}
{
%Drop \BODY
}
{
}
\else
\NewEnviron{teachask}{}  % This drops body.
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% END: Diderot Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
