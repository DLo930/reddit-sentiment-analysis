export PATH := /usr/local/depot/cc0/bin:$(PATH)
CC0=cc0

.PHONY: default extract compile grade

default:
	@$(MAKE) extract -s
	@$(MAKE) compile -is
	@$(MAKE) grade -s

extract:
	date
	echo "[15-122] Extraction..."
	echo "============================================="
	tar -mkxf autograde.tar
	tar -mkxzvf handin.tgz
	echo ""

compile:
	date
	echo "[15-122] Compilation..."
	echo "============================================="
	$(CC0) -d -o testgreet scavhunt.c0 testgreet.c0
	$(CC0) -d -o tutorial scavhunt.c0 tutorial.c0
	$(CC0) -d -o salute scavhunt.c0 scavhunt-test.c0
	$(CC0) -d -o feedback scavhunt.c0 feedback.c0
	$(CC0) -o puzzletest puzzle.c0 puzzle-grade.c0

grade:
	date
	echo "[15-122] Grading..."
	echo "============================================="
	python grader.py
