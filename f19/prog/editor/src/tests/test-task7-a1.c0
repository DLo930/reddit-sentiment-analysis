#use <conio>
#use "sol-tbuf.c0"

//EXPECT ANNOTATION FAILURE

int main()
{
  bool passed = true;
  tbuf B = tbuf_new_();

  //don't put enough chars in
  for(int i = 0; i < 15; i++)
    insert_char_(B, 'x');
  for(int i = 0; i < 3; i ++)
    gapbuf_backward_(B->point->data);

  //the point isn't full, so this shouldn't work if they put the invariant in
  split_point(B);
  
  //should be a tbuf
  if(!(is_tbuf_(B) == true)) {
    passed = false;
    println("split didn't make a tbuf");
  }

  //point not full
  if(!(gapbuf_full_(B->point->data) == false)) {
    passed = false;
    println("right side split left point full");
  }

  //report
  if(passed) return 0; else return 1;
}