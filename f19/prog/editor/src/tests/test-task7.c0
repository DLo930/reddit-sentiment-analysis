/* Tests the tbuf_empty and tbuf_new functions. There isn't much to test. */

#use <args>
#use "make-tbuf.c0"

int main() {
  args_t args = args_parse();
  if (args->argc != 1) 4/0; // Signal bug in autograder!
  string s = args->argv[0];
  
  if (string_equal("new_ok", s)) {
    assert(is_tbuf_(tbuf_new()));
  } else if (string_equal("is_empty", s)) {
    assert(tbuf_empty(make_tbuf("|")));
  } else if (string_equal("emptynull", s)) {
    assert(tbuf_empty(NULL));
  } else if (string_equal("emptyalloc", s)) {
    assert(tbuf_empty(alloc(struct text_buffer)));
  } 

  // Don't know how to deal with the argument, so get weird
  else { 4/0; }

  return 0;
}