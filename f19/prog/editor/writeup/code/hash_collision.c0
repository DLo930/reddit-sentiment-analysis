/* Tests the Hash Tables question */

#use <conio>
#use <string>
#use <util>

int hash(string s, int m) 
//@requires m > 0;
//@ensures 0 <= \result && \result < m;
{
  int len = string_length(s);
  int h = 0;

  print("--- ");
  for(int i = 0; i < len; i++) {
    h = h*31;
    int j = char_ord(string_charat(s, i));
    h = h + j;
    printint(j);
    print("*31^");
    printint(len-i-1);
    if (i < len-1) print(" + ");
  }
  print(" = "); printint(h); println("");

  return abs(h % m);
}

int main() {
  while(true)  {
    println("================================================================");

    print("String 1: "); flush();
    string s1 = readline();
    int i1 = hash(s1, 4126);
    print("\""); print(s1); print("\" (hash "); printint(i1); println(")");
    
    print("String 2: "); flush();
    string s2 = readline();
    int i2 = hash(s2, 4126);
    print("\""); print(s2); print("\" (hash "); printint(i2); println(")");

    if (i1 != i2) {
      print("INCORRECT RESULT!!!! (press ENTER to continue)"); flush(); 
      readline();
    }
  }

  return 0;
}